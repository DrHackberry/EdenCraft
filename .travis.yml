language: cpp

dist: trusty

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - g++-7
      - libglew-dev
      - libglfw-dev
      - libopenal-dev

sudo:
  required

notifications:
  email: true

compiler: gcc

env:
  global:
    - COMPILER=g++-7
  matrix:
    - CONFIG=Debug

before_install:
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get update -qq
  - chmod +x build/premake5

install:
  - sudo apt-get install -qq g++-7
  - sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-7 90

script:
  - cd build && ./premake5 gmake
  - make -f Tests.make config=debug_linux64 && cd ..

after_script:
  - cd build && ./clear_build.sh && cd ..
